# 反范式化

反范式化一定发生在满足范式设计的基础之上，不等于非范式化，而是进行局部调整。

## 作用

通过增加冗余数据，牺牲一部分写入性能，换取更高的读取性能。

在设计范式的约束下，数据表中没有冗余信息（某个数据只存放在某张表的某个单元格中），为了得到某个数据可能需要一系列的跨表查询，因而读操作性能不佳，但写操作很快，因为更新数据时只需要修改一处

反范式化就是要打破这种约束，*把某些数据在不同的地方多放几份*，以加快数据检索速度：

## 代价

但除非必要，一般不建议反范式化，因其代价高昂：

- 需要自己保障多处数据的一致性，其实比较困难：打破范式，意味着之前通过范式化解决的更新、插入、删除异常问题又将重新冒出来，也就是说，*冗余数据的一致性要靠 DBA 自己来保证*，而不像索引视图等由 DBMS 来保证
- 牺牲了写入速度：由于反范式化引入了冗余数据，更新时要修改多处，但大多数场景都是读密集的，写入慢一点问题不大
- 浪费了存储空间：存储了不必要的冗余数据，自然会浪费一些存储空间，但空间换时间一般是可接受的（毕竟内存、硬盘等资源已经相对廉价了）