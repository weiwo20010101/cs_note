# 高并发环境下线程池参数

## 参考

[Java线程池实现原理及其在美团业务中的实践]: https://tech.meituan.com/2020/04/02/java-pooling-pratice-in-meituan.html

## 线程池的好处

- **降低资源消耗**：通过池化技术重复利用已创建的线程，降低线程创建和销毁造成的损耗。
- **提高响应速度**：**任务到达时，无需等待线程创建即可立即执行。**
- **提高线程的可管理性**：**线程是稀缺资源，如果无限制创建，不仅会消耗系统资源，还会因为线程的不合理分布导致资源调度失衡，降低系统的稳定性。使用线程池可以进行统一的分配、调优和监控。**
- **提供更多更强大的功能**：线程池具备可拓展性，允许开发人员向其中增加更多的功能。比如延时定时线程池ScheduledThreadPoolExecutor，就允许任务延期执行或定期执行。

## 动态化参数

1. 简化线程池配置：核心参数是：corePoolSize，maximumPoolSize，workQueue 它们最大程度地决定了线程池的任务分配和线程分配策略。
2. 参数可动态调整：为了解决参数不好配，修改参数成本高等问题。在Java线程池留有高扩展性的基础上，封装线程池，允许线程池监听同步外部的消息，根据消息进行修改配置。将线程池的配置放置在平台侧，允许开发同学简单的查看、修改线程池配置。
3. 增加线程池监控/报警：对某事物缺乏状态的观测，就对其改进无从下手。在线程池执行任务的生命周期添加监控能力，帮助开发同学了解线程池状态。记录操作日志；校验修改权限；操作监控，修改，删除，创建等操作会通知到对应的负责人。任务监控；负载监控，比如队列积压程度

![图21 可动态修改线程池参数](https://p0.meituan.net/travelcube/414ba7f3abd11e5f805c58635ae10988166121.png)

并且通过飞书等等发送告警

![图22 大象告警通知](https://p0.meituan.net/travelcube/04e73f7186a91d99181e1b5615ce9e4a318600.png)