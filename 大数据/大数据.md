# 大数据

## MapReduce的原理

- 最初由谷歌用于分析其搜索结果，后来谷歌开源了bigtable，基于此发展，MapReduce 因其能够并行拆分和处理数 TB 的数据而获得广泛普及，从而更快地获得结果。

- `MapReduce` 不是将数据发送到应用程序或者逻辑所在的位置，而是在数据已经驻留的服务器上执行逻辑，以减少网络传输的开销，加快处理速度。
- `MapReduce`的数据访问和存储基于磁盘，输入通常存储为包含结构化，半结构化，非结构化数据的文件，输出也存储在文件中。

#### 原理

MapReduce 的核心是两个函数：Map 和 Reduce。它们一个接一个地排序。

- Map函数将来自磁盘的输入作为 <key,value> 对进行处理，并生成另一组中间 <key,value> 对作为输出。
- Reduce函数还将输入作为 <key,value> 对，并生成 <key,value> 对作为输出。

map 是过滤和排序初始数据的强制性步骤，但 reduce 功能是可选的。

### map

映射器：map server

输入数据经过split分为更小的块，（64mb大小），然后每个块分配给映射器进行处理。

例如，如果一个文件有 100 条记录要处理，则可以同时运行 100 个映射器，每个映射器处理一条记录。或者也许 50 个映射器可以一起运行，每个映射器处理两个记录。Hadoop 框架根据要处理的数据大小和每个映射器服务器上可用的内存块来决定使用多少映射器。

或者一个文件640mb，分为10块进行处理，每个块有一个map server。

### reduce

分配：在所有map server完成处理之后，框架会将结果在传递给reduce之前对结果进行混洗和排序。档mapper仍然在进行中时，reducer无法启动。

